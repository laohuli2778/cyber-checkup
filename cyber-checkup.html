<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#121212" />
  <title>èµ›åšç­å‘³ä½“æ£€æŠ¥å‘Š</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    :root{
      --bg:#121212;
      --card:#1E1E1E;
      --border:#333;
      --text:#EDEDED;
      --muted:#A3A3A3;
      --green:#00FF41;
      --red:#FF3B30;
      --shadow: 0 12px 40px rgba(0,0,0,.55);
      --radius:12px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1000px 600px at 20% 0%, rgba(0,255,65,.10), transparent 55%),
                  radial-gradient(900px 700px at 90% 10%, rgba(255,59,48,.08), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:var(--sans);
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      overflow-x:hidden;
    }
    .cx-app{min-height:100%; display:flex; align-items:stretch; justify-content:center; padding:20px 14px calc(24px + env(safe-area-inset-bottom));}
    .cx-shell{width:100%; max-width:420px; display:flex; flex-direction:column; gap:14px;}

    .cx-view{opacity:0; transform:translateY(10px); pointer-events:none; position:absolute; inset:0;}
    .cx-view.cx-active{opacity:1; transform:translateY(0); pointer-events:auto; position:relative;}
    .cx-fade{transition:opacity .35s ease, transform .35s ease;}

    .cx-card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0)) , var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }

    .cx-title{
      font-family:var(--mono);
      letter-spacing:.04em;
      font-weight:700;
    }
    .cx-sub{color:var(--muted); line-height:1.6}

    .cx-center{display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; gap:14px; padding:22px 8px;}

    .cx-fingerprint{
      width:100%;
      max-width:300px;
      border-radius:999px;
      border:1px solid rgba(0,255,65,.35);
      background:linear-gradient(180deg, rgba(0,255,65,.18), rgba(0,255,65,.06));
      color:var(--text);
      font-family:var(--mono);
      letter-spacing:.08em;
      padding:14px 18px;
      box-shadow:0 0 0 rgba(0,255,65,.0);
      position:relative;
      outline:none;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      transition:transform .15s ease, border-color .2s ease;
    }
    .cx-fingerprint:active{transform:scale(.99)}
    .cx-fingerprint::before{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:999px;
      border:1px solid rgba(0,255,65,.22);
      opacity:.9;
      filter:blur(.2px);
      animation:cx-breath 1.8s ease-in-out infinite;
    }
    @keyframes cx-breath{
      0%,100%{transform:scale(1); opacity:.35; box-shadow:0 0 0 0 rgba(0,255,65,.0)}
      50%{transform:scale(1.03); opacity:.9; box-shadow:0 0 18px 2px rgba(0,255,65,.20)}
    }

    .cx-progressWrap{height:4px; background:#222; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.06)}
    .cx-progressBar{height:100%; width:0%; background:linear-gradient(90deg, rgba(0,255,65,.55), rgba(0,255,65,1)); box-shadow:0 0 20px rgba(0,255,65,.35); transition:width .35s ease;}

    .cx-qText{font-family:var(--mono); font-size:20px; line-height:1.35; text-align:center; margin:6px 0 8px;}

    .cx-options{display:flex; flex-direction:column; gap:10px; margin-top:6px;}
    .cx-opt{
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.02);
      color:var(--text);
      padding:14px 14px;
      text-align:left;
      font-family:var(--sans);
      line-height:1.35;
      outline:none;
      -webkit-tap-highlight-color:transparent;
      transition:border-color .18s ease, background .18s ease, transform .12s ease;
    }
    .cx-opt:active{transform:scale(.995)}
    .cx-opt.cx-picked{border-color:rgba(0,255,65,.9); background:rgba(0,255,65,.08)}
    .cx-opt.cx-disabled{opacity:.65}

    .cx-optTag{font-family:var(--mono); color:rgba(0,255,65,.9); margin-right:10px;}

    .cx-loading{
      min-height:calc(100vh - 40px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cx-terminal{
      width:100%;
      max-width:420px;
      padding:22px 16px;
      background:#000;
      border-radius:14px;
      border:1px solid rgba(0,255,65,.22);
      box-shadow:0 0 0 1px rgba(0,0,0,.8), 0 18px 60px rgba(0,0,0,.8);
      font-family:var(--mono);
    }
    .cx-blink{color:var(--green); text-shadow:0 0 14px rgba(0,255,65,.35);}
    .cx-line{display:flex; gap:10px; align-items:flex-start; line-height:1.5;}
    .cx-cursor{width:10px; height:18px; background:rgba(0,255,65,.85); margin-top:2px; animation:cx-cursor 1s steps(1) infinite;}
    @keyframes cx-cursor{50%{opacity:0}}
    .cx-flicker{animation:cx-flicker 1.2s infinite;}
    @keyframes cx-flicker{
      0%, 100%{opacity:1}
      10%{opacity:.85}
      20%{opacity:1}
      30%{opacity:.72}
      40%{opacity:1}
      60%{opacity:.92}
      80%{opacity:1}
    }

    .cx-kpiRow{display:flex; gap:12px; align-items:stretch;}
    .cx-kpi{flex:1; padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.02)}
    .cx-kpiLabel{font-family:var(--mono); color:var(--muted); letter-spacing:.08em; font-size:12px}
    .cx-kpiValue{font-family:var(--mono); font-size:26px; margin-top:6px}

    .cx-level{font-family:var(--mono); font-size:18px; margin-top:10px;}
    .cx-levelHint{color:var(--muted); margin-top:6px; line-height:1.6}

    .cx-chartWrap{height:280px; position:relative}
    canvas{max-width:100%}

    .cx-prescTitle{font-family:var(--mono); letter-spacing:.05em; margin:0 0 10px}
    .cx-prescList{margin:0; padding-left:16px; color:var(--text)}
    .cx-prescList li{margin:8px 0; color:rgba(237,237,237,.92); line-height:1.5}

    .cx-guide{display:flex; flex-direction:column; gap:12px; margin-top:12px}
    .cx-guideRow{display:flex; gap:10px; align-items:flex-start}
    .cx-guideTags{display:flex; flex-wrap:wrap; gap:8px}
    .cx-pill{display:inline-flex; align-items:center; border-radius:4px; padding:2px 8px; font-size:.85em; font-family:var(--mono); letter-spacing:.06em; border:1px solid rgba(255,255,255,.16); background:rgba(255,255,255,.04); color:rgba(237,237,237,.92)}
    .cx-pill-green{border-color:rgba(0,255,65,.65); color:rgba(0,255,65,.95); background:rgba(0,255,65,.10)}
    .cx-pill-red{border-color:rgba(255,59,48,.65); color:rgba(255,59,48,.95); background:rgba(255,59,48,.10)}
    .cx-pill-blue{border-color:rgba(0,229,255,.65); color:rgba(0,229,255,.95); background:rgba(0,229,255,.10)}

    .cx-warn{color:var(--red); font-family:var(--mono); line-height:1.5;}
    .cx-disclaimer{margin-top:6px; text-align:center; font-family:var(--mono); opacity:.9}

    .cx-actions{display:flex; gap:10px; margin-top:12px;}
    .cx-btn{
      flex:1;
      border-radius:12px;
      border:1px solid rgba(0,255,65,.35);
      background:linear-gradient(180deg, rgba(0,255,65,.18), rgba(0,255,65,.06));
      color:var(--text);
      font-family:var(--mono);
      padding:12px 12px;
      letter-spacing:.06em;
      -webkit-tap-highlight-color:transparent;
      transition:transform .15s ease, opacity .2s ease;
    }
    .cx-btn:active{transform:scale(.99)}
    .cx-btn.cx-ghost{border-color:rgba(255,255,255,.12); background:rgba(255,255,255,.03)}
    .cx-btn:disabled{opacity:.55}

    .cx-toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(20,20,20,.92);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      box-shadow:0 16px 60px rgba(0,0,0,.75);
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:.04em;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease, transform .25s ease;
      z-index:50;
      max-width:92vw;
      text-align:center;
    }
    .cx-toast.cx-show{opacity:1; transform:translateX(-50%) translateY(-4px)}

    .cx-overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.78);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding:16px 14px calc(16px + env(safe-area-inset-bottom));
      z-index:60;
    }
    .cx-overlay.cx-show{display:flex;}
    .cx-sheet{
      width:100%;
      max-width:420px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0)) , #0b0b0b;
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;
      box-shadow:0 18px 80px rgba(0,0,0,.85);
      padding:14px;
    }
    .cx-sheetTitle{font-family:var(--mono); letter-spacing:.06em; margin:0 0 10px}
    .cx-sheetHint{margin:0 0 12px; color:var(--muted); line-height:1.55}
    .cx-imgWrap{border-radius:12px; overflow:hidden; border:1px solid rgba(0,255,65,.18); background:#000}
    .cx-imgWrap img{width:100%; display:block}

    .cx-small{font-size:12px; color:var(--muted)}

    @media (prefers-reduced-motion: reduce){
      .cx-fade,.cx-progressBar,.cx-fingerprint::before,.cx-flicker,.cx-cursor{transition:none; animation:none}
    }
  </style>
</head>
<body>
  <div class="cx-app">
    <div class="cx-shell" id="app">
      <section id="viewWelcome" class="cx-view cx-active cx-fade">
        <div class="cx-card cx-center">
          <div class="cx-title" style="font-size:22px;">èµ›åšç­å‘³ä½“æ£€æŠ¥å‘Š</div>
          <div class="cx-sub" style="max-width:320px; font-family:var(--mono);">
            ä½ ä»¥ä¸ºä½ åœ¨ä¸Šç­ï¼Œå…¶å®æ˜¯è¢« KPI ç‰µç€èµ°çš„ç¢³åŸºå¤–è®¾ã€‚<br />
            ç°åœ¨å¼€å§‹å½•å…¥æŒ‡çº¹ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç§°é‡ä½ çš„çµé­‚å«ç³–é‡ã€‚
          </div>
          <button id="btnStart" class="cx-fingerprint" type="button">æŒ‡çº¹å½•å…¥ / å¼€å§‹ä½“æ£€</button>
          <div class="cx-small">æç¤ºï¼šå…¨ç¨‹æ— â€œä¸‹ä¸€æ­¥â€ï¼Œä½ åªéœ€è¦ä¸åœé€‰æ‹©ã€‚</div>
        </div>
      </section>

      <section id="viewQuiz" class="cx-view cx-fade" aria-hidden="true">
        <div class="cx-card">
          <div class="cx-progressWrap" role="progressbar" aria-label="è¿›åº¦" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="cx-progressBar" id="progressBar"></div>
          </div>
          <div class="cx-qText" id="qText"></div>
          <div class="cx-options" id="options"></div>
          <div class="cx-small" id="qCounter" style="text-align:center; margin-top:10px;"></div>
        </div>
      </section>

      <section id="viewLoading" class="cx-view cx-fade" aria-hidden="true">
        <div class="cx-loading">
          <div class="cx-terminal">
            <div class="cx-line"><div class="cx-cursor"></div><div class="cx-blink cx-flicker" id="loadingLine">æ­£åœ¨è§£æ Excel è„‘ç”µæ³¢...</div></div>
            <div class="cx-small" style="margin-top:10px; font-family:var(--mono);">è¯·å‹¿çœ¨çœ¼ï¼Œç³»ç»Ÿåœ¨è¯»å–ä½ çš„ç­å‘³ç¼“å­˜ã€‚</div>
          </div>
        </div>
      </section>

      <section id="viewResult" class="cx-view cx-fade" aria-hidden="true">
        <div id="captureArea" style="display:flex; flex-direction:column; gap:14px;">
          <div class="cx-card">
            <div class="cx-title" style="font-size:16px; color:rgba(0,255,65,.9);">èµ›åšä½“æ£€ / ç—…å†æŠ¥å‘Š</div>
            <div class="cx-kpiRow" style="margin-top:14px;">
              <div class="cx-kpi">
                <div class="cx-kpiLabel">æ€»å¾—åˆ†ç™¾åˆ†æ¯”</div>
                <div class="cx-kpiValue" id="kpiPercent">--%</div>
              </div>
              <div class="cx-kpi">
                <div class="cx-kpiLabel">åŸå§‹æ€»åˆ†</div>
                <div class="cx-kpiValue" id="kpiScore">--</div>
              </div>
            </div>
            <div class="cx-level" id="levelText">--</div>
            <div class="cx-levelHint" id="levelHint">--</div>
          </div>

          <div class="cx-card">
            <div class="cx-title" style="font-size:14px; color:rgba(0,255,65,.9);">äº”ç»´é›·è¾¾ / äº”è„ä¿±å…¨</div>
            <div class="cx-sub" style="margin-top:6px; font-family:var(--mono);">ç»´åº¦ï¼šæ‘¸é±¼åŠŸåŠ› / ç”©é”…æŠ—æ€§ / æƒ…ç»ªæ­»æ„Ÿ / ç”»é¥¼å…ç–« / å‘ç–¯æŒ‡æ•°</div>
            <div class="cx-chartWrap" style="margin-top:12px;">
              <canvas id="radarCanvas" role="img" aria-label="äº”ç»´é›·è¾¾å›¾"></canvas>
            </div>
            <div class="cx-small" style="margin-top:10px;">æ³¨ï¼šæ•°æ®æ¥è‡ªç³»ç»Ÿå¯¹ä½ â€œæ—¥å¸¸å´©æºƒé¢‘ç‡â€çš„åˆç†è‡†æµ‹ã€‚</div>
          </div>

          <div class="cx-card">
            <h3 class="cx-prescTitle" id="prescTitle">å¤„æ–¹å• / Prescription</h3>
            <ul class="cx-prescList" id="prescList"></ul>
          </div>

          <div class="cx-card">
            <div class="cx-title" style="font-size:14px; color:rgba(0,255,65,.9);">ç”Ÿå­˜æŒ‡å— / ä¸´åºŠå®œå¿Œ (SURVIVAL GUIDE)</div>
            <div class="cx-guide">
              <div class="cx-guideRow">
                <span class="cx-pill cx-pill-green">å®œ</span>
                <div class="cx-guideTags" id="guideYi"></div>
              </div>
              <div class="cx-guideRow">
                <span class="cx-pill cx-pill-red">å¿Œ</span>
                <div class="cx-guideTags" id="guideJi"></div>
              </div>
              <div class="cx-guideRow">
                <span class="cx-pill cx-pill-blue">åŠ è£…ä¹‰ä½“</span>
                <div class="cx-guideTags" id="guideAug"></div>
              </div>
            </div>
          </div>

          <div class="cx-card">
            <div class="cx-warn">æˆªå›¾ä¿å­˜æ­¤ç—…å†ï¼Œå‰å¾€å°çº¢ä¹¦æ¨èåŸå¸–ä¸‹é¢ï¼ˆä½œè€…@ç¥ï¼Ÿç§˜æ˜Ÿäººï¼‰ï¼Œç§ä¿¡å‘é€æš—å·ã€é€€å ‚é¼“ã€‘ï¼Œå°±å¯ä»¥é¢†å– ã€Šé«˜æƒ…å•†é˜²ç”©é”…è¯æœ¯åº“ã€‚pdfã€‹å’Œã€Œèµ›åšå‘ç–¯/ç¦»çº¿çŠ¶æ€ã€ç‰©æ–™åŒ…ï¼Œä»¥åŠã€Š2026 æ—·é‡å›è¡€æŒ‡å—ã€‹ã€‚ </div>
            <div class="cx-actions">
              <button class="cx-btn" id="btnShot" type="button">ä¿å­˜èµ›åšç—…å†å›¾åˆ°æœ¬åœ°</button>
              <button class="cx-btn cx-ghost" id="btnRestart" type="button">é‡æ–°ä½“æ£€</button>
            </div>
          </div>
          <div class="cx-small cx-disclaimer">æµ‹è¯•ç»“æœä»…ä¾›å¨±ä¹å‚è€ƒï¼Œä¸æ„æˆä¸“ä¸šè¯Šæ–­ã€‚</div>
        </div>
      </section>

      <div id="toast" class="cx-toast" role="status" aria-live="polite"></div>

      <div id="overlay" class="cx-overlay" aria-hidden="true">
        <div class="cx-sheet">
          <h3 class="cx-sheetTitle">ç—…å†å›¾å·²ç”Ÿæˆ</h3>
          <p class="cx-sheetHint" id="saveHint">æ­£åœ¨å‡†å¤‡ä¿å­˜æ–¹å¼...</p>
          <div class="cx-imgWrap"><img id="shotImg" alt="èµ›åšç—…å†å›¾" /></div>
          <div class="cx-actions" style="margin-top:12px;">
            <button class="cx-btn cx-ghost" id="btnCloseOverlay" type="button">å…³é—­</button>
            <a class="cx-btn" id="btnOpenNew" href="#" target="_blank" rel="noopener">æ–°çª—å£æ‰“å¼€</a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    (() => {
      const baseQuestions = [
        { question: "é—¹é’Ÿå“èµ·æ—¶çš„ç¬¬ä¸€ç”Ÿç†ååº”ï¼Ÿ", options: [
          {text: "å¼¹å°„èµ·æ­¥ï¼Œå…ƒæ°”æ»¡æ»¡", score: 1},
          {text: "æŒ‰æ‰è´ªç¡æ¨¡å¼ï¼Œå†çœ¯5åˆ†é’Ÿ", score: 2},
          {text: "ç›¯ç€å¤©èŠ±æ¿æ€è€ƒè¯·å‡çš„ç†ç”±", score: 3},
          {text: "èƒ¸å£é—·ç—›ï¼Œæƒ³æŠŠæ‰‹æœºç ¸äº†", score: 4}
        ]},
        { question: "è¿›ç”µæ¢¯æ­£å¥½é‡åˆ°ä¸ç†Ÿçš„é¢†å¯¼ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "ä¸»åŠ¨çƒ­æƒ…æ‰“æ‹›å‘¼", score: 1},
          {text: "å¾®ç¬‘ç‚¹å¤´ï¼Œä½å¤´çœ‹æ‰‹æœº", score: 2},
          {text: "å‡è£…å¬è¯­éŸ³ï¼Œèº²åœ¨è§’è½", score: 3},
          {text: "å®æ„¿ç­‰ä¸‹ä¸€è¶Ÿæˆ–çˆ¬æ¥¼æ¢¯", score: 4}
        ]},
        { question: "ç°åœ¨çš„ä¸Šç­ OOTDï¼ˆç©¿æ­ï¼‰ç­–ç•¥æ˜¯ï¼Ÿ", options: [
          {text: "ç²¾å¿ƒæ­é…ï¼Œå…¨å¥—å¦†å®¹", score: 1},
          {text: "æç®€é£ï¼Œå¹²å‡€æ•´æ´å°±è¡Œ", score: 2},
          {text: "è¡£æœä¸è‡­å°±éšä¾¿å¥—ä¸Š", score: 3},
          {text: "å·²è¿›åŒ–å‡ºâ€˜ä¸Šç­æ¶å¿ƒç©¿æ­â€™", score: 4}
        ]},
        { question: "å¦‚æœæ‰“å¡å·® 1 åˆ†é’Ÿå°±è¿Ÿåˆ°ï¼Œä½ çš„æ­¥ä¼ï¼Ÿ", options: [
          {text: "ç™¾ç±³å†²åˆºï¼Œä¿ä½å…¨å‹¤", score: 1},
          {text: "ç«èµ°æ¨¡å¼ï¼Œå†…å¿ƒæ…Œä¹±", score: 2},
          {text: "æ— æ‰€è°“ï¼Œå¤§ä¸äº†è¯·å‡", score: 3},
          {text: "é¡ºä¾¿å»ä¹°æ¯å’–å•¡è¿Ÿä¸ªç—›å¿«", score: 4}
        ]},
        { question: "ååˆ°å·¥ä½ï¼Œæ‰“å¼€ç”µè„‘çš„ç¬¬ä¸€ä»¶äº‹ï¼Ÿ", options: [
          {text: "æ»¡æ€€æœŸå¾…åˆ—å‡º To-Do List", score: 1},
          {text: "æŸ¥çœ‹æ˜¨å¤©çš„é‚®ä»¶", score: 2},
          {text: "å¹æ°”ï¼Œç›¯ç€æ¡Œé¢å‘å‘†10åˆ†é’Ÿ", score: 3},
          {text: "ç†Ÿç»ƒæ‰“å¼€æ‘¸é±¼ç½‘é¡µ", score: 4}
        ]},
        { question: "å¬åˆ°â€˜åº•å±‚é€»è¾‘ã€èµ‹èƒ½ã€é—­ç¯â€™ç­‰è¯ï¼Œä½ ï¼Ÿ", options: [
          {text: "è§‰å¾—ä¸“ä¸šï¼Œè®°ä¸‹æ¥", score: 1},
          {text: "ä¹ ä»¥ä¸ºå¸¸ï¼Œå·¦è€³è¿›å³è€³å‡º", score: 2},
          {text: "ç”Ÿç†ä¸é€‚ï¼Œæƒ³å¹²å‘•", score: 3},
          {text: "ç†Ÿç»ƒç”¨æ›´é«˜çº§çš„é»‘è¯æ€¼å›å»", score: 4}
        ]},
        { question: "è·¨éƒ¨é—¨æ²Ÿé€šé‡åˆ°ä¸é…åˆçš„ç”©é”…ä¾ ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "åæ€æ˜¯ä¸æ˜¯è‡ªå·±æ²¡è¯´æ¸…æ¥š", score: 1},
          {text: "å½“é¢æ±‚çˆ·çˆ·å‘Šå¥¶å¥¶æ¨è¿›", score: 2},
          {text: "æˆªå›¾ç•™è¯ï¼Œå‡†å¤‡æ’•é€¼", score: 3},
          {text: "é»˜é»˜CCè€æ¿å¹¶åœ¨é‚®ä»¶é‡Œé˜´é˜³", score: 4}
        ]},
        { question: "ç¾¤é‡Œ@ä½ â€˜æœ‰ç©ºå—â€™ï¼Œä½ è¯»åˆ°è¿™å¥æ—¶çš„å¿ƒç‡ï¼Ÿ", options: [
          {text: "ç¨³å®šï¼Œç”šè‡³æƒ³å¸®å¿™", score: 1},
          {text: "ç•¥å‡é«˜ï¼Œä½†è¿˜èƒ½è£…é•‡å®š", score: 2},
          {text: "ç¬é—´åŠ é€Ÿï¼Œæ‰‹å¿ƒå‡ºæ±—", score: 3},
          {text: "ç›´æ¥æ‰çº¿ï¼Œçµé­‚é€€ç¾¤", score: 4}
        ]},
        { question: "å¼€ä¼šæ—¶å¬åˆ°â€˜åŠ æ€¥â€™ï¼Œä½ è„‘å†…ç¬¬ä¸€å¥å°è¯ï¼Ÿ", options: [
          {text: "å¥½çš„æˆ‘é©¬ä¸Šå®‰æ’", score: 1},
          {text: "è¡Œï¼Œæˆ‘è°ƒä¸€ä¸‹ä¼˜å…ˆçº§", score: 2},
          {text: "æˆ‘å…ˆæŠŠé”…æ”¾æ—è¾¹", score: 3},
          {text: "ä½ æ€¥ä½ çš„ï¼Œæˆ‘ç–¯æˆ‘çš„", score: 4}
        ]},
        { question: "Leader è¯´â€˜è¿™ä¸ªä¸éš¾â€™ï¼Œä½ çš„ååº”ï¼Ÿ", options: [
          {text: "æ”¶åˆ°ï¼Œæˆ‘æ¥æ‹†è§£", score: 1},
          {text: "ç‚¹å¤´å¾®ç¬‘ï¼Œå†…å¿ƒç®—å·¥æ—¶", score: 2},
          {text: "æ²‰é»˜ï¼Œå¼€å§‹å†™é—ä¹¦", score: 3},
          {text: "åæ‰‹å›ä¸€å¥ï¼šé‚£æ‚¨æ¥ï¼Ÿ", score: 4}
        ]},
        { question: "åˆä¼‘è¢«è¿«ç¤¾äº¤ï¼Œä½ çš„ç”µé‡ï¼Ÿ", options: [
          {text: "æ»¡æ ¼ï¼Œç”šè‡³æƒ³å›¢å»º", score: 1},
          {text: "è¿˜è¡Œï¼ŒèŠä¸¤å¥å°±æ’¤", score: 2},
          {text: "å¿«é€Ÿæ‰ç”µï¼Œé å‡ç¬‘ç»­å‘½", score: 3},
          {text: "ç›´æ¥å…³æœºï¼Œè£…ç¡ä¿å‘½", score: 4}
        ]},
        { question: "éœ€æ±‚æ–‡æ¡£å†™â€˜å¦‚æœ‰é—®é¢˜éšæ—¶æ²Ÿé€šâ€™ï¼Œä½ ç†è§£ä¸ºï¼Ÿ", options: [
          {text: "å¼€æ”¾åä½œï¼Œæ•ˆç‡æå‡", score: 1},
          {text: "å¯ä»¥é—®ï¼Œä½†å°½é‡å…‹åˆ¶", score: 2},
          {text: "éšæ—¶=éšä¾¿ï¼Œæ²Ÿé€š=ç”©é”…", score: 3},
          {text: "è¿™æ˜¯è¯…å’’ï¼šä½ æ°¸è¿œä¸ä¼šä¸‹ç­", score: 4}
        ]},
        { question: "å½“ä½ å‘ç°çº¿ä¸Šå‡ºé—®é¢˜ä½†ä¸æ˜¯ä½ æ”¹çš„ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "å…ˆæ•‘ç«å†å¤ç›˜", score: 1},
          {text: "å…ˆç¡®è®¤è´£ä»»è¾¹ç•Œå†æ•‘ç«", score: 2},
          {text: "å…ˆæˆªå›¾ä¿å‘½ï¼Œå†æ•‘ç«", score: 3},
          {text: "å…ˆè£…æ­»ï¼Œç­‰é£å‘", score: 4}
        ]},
        { question: "è¢«å®‰æ’å†™å‘¨æŠ¥ï¼Œä½ çš„å†™ä½œé£æ ¼ï¼Ÿ", options: [
          {text: "å®¢è§‚æ¸…æ™°ï¼Œæ¡ç†åˆ†æ˜", score: 1},
          {text: "èƒ½å†™å°±è¡Œï¼Œåˆ«å¤ªè¯¦ç»†", score: 2},
          {text: "å…¨æ˜¯é»‘è¯ï¼Œè°ä¹Ÿåˆ«æ‡‚", score: 3},
          {text: "å†™æˆæ‚¼è¯ï¼Œé¡ºä¾¿è¶…åº¦è‡ªå·±", score: 4}
        ]},
        { question: "åŒäº‹è¯´â€˜æˆ‘ä»¬æ˜¯ä¸€ä¸ª teamâ€™ï¼Œä½ å¬åˆ°çš„æ˜¯ï¼Ÿ", options: [
          {text: "äº’ç›¸æ‰˜åº•çš„å›¢é˜Ÿ", score: 1},
          {text: "èµ„æºå…±äº«ä½†å„è‡ªè‡ªä¿", score: 2},
          {text: "team=ä¸€èµ·åŠ ç­", score: 3},
          {text: "team=é”…å¹³å‡åˆ†é…", score: 4}
        ]},
        { question: "ä¸´è¿‘ä¸‹ç­æ”¶åˆ°ä¸€å¥â€˜èƒ½ä¸èƒ½ä»Šå¤©å‘ç‰ˆâ€™ï¼Œä½ ï¼Ÿ", options: [
          {text: "å¯ä»¥ï¼Œèµ°æµç¨‹ç¨³ç¨³å‘", score: 1},
          {text: "çœ‹æƒ…å†µï¼Œåˆ«å½±å“è´¨é‡", score: 2},
          {text: "å˜´ä¸Šè¯´è¡Œï¼Œæ‰‹ä¸Šæ‘†çƒ‚", score: 3},
          {text: "ç›´æ¥å‘ç–¯ï¼šæˆ‘ä¸æ˜¯ CI/CD", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å›¢å»ºâ€™çš„çœŸå®æ€åº¦ï¼Ÿ", options: [
          {text: "å–œæ¬¢ï¼è¿˜èƒ½è®¤è¯†äºº", score: 1},
          {text: "ä¸€èˆ¬èˆ¬ï¼Œèƒ½ä¸å»å°±ä¸å»", score: 2},
          {text: "å»æ˜¯å»çš„ï¼Œé­‚ä¸åœ¨", score: 3},
          {text: "å›¢å»º=ç²¾ç¥æŠ˜ç£¨", score: 4}
        ]},
        { question: "çœ‹åˆ°éœ€æ±‚å˜æ›´ï¼Œä½ çš„ç¬¬ä¸€åŠ¨ä½œï¼Ÿ", options: [
          {text: "æ›´æ–°æ’æœŸä¸æ–¹æ¡ˆ", score: 1},
          {text: "ç¡®è®¤å½±å“èŒƒå›´", score: 2},
          {text: "å…ˆåæ§½å†å¹²æ´»", score: 3},
          {text: "å…ˆæŠŠèŠå¤©è®°å½•å­˜è¯", score: 4}
        ]},
        { question: "è¢«é—®â€˜ä½ æ€ä¹ˆæ€»æ˜¯è¿™ä¹ˆå†·é™â€™ï¼Œä½ å…¶å®æ˜¯ï¼Ÿ", options: [
          {text: "çœŸçš„å†·é™ï¼Œæƒ…ç»ªç¨³å®š", score: 1},
          {text: "è£…çš„ï¼Œæ€•è¢«çœ‹ç©¿", score: 2},
          {text: "æ—©å·²éº»æœ¨ï¼Œçœç”µæ¨¡å¼", score: 3},
          {text: "å†…å¿ƒåœ¨å°–å«ï¼Œè¡¨é¢åœ¨å¾®ç¬‘", score: 4}
        ]},
        { question: "ä½ å¯¹åŠ ç­çš„è¯„ä»·æ›´æ¥è¿‘ï¼Ÿ", options: [
          {text: "å¿…è¦æ—¶å¯æ¥å—", score: 1},
          {text: "å¶å°”å¯ä»¥ï¼Œä½†åˆ«å¸¸æ€", score: 2},
          {text: "åŠ ç­=ç®¡ç†å¤±è´¥", score: 3},
          {text: "åŠ ç­=äººç±»å°Šä¸¥æ¸…é›¶", score: 4}
        ]},
        { question: "è¢«æ‹‰è¿›ä¸€ä¸ªâ€˜å¯¹é½ç¾¤â€™ï¼Œä½ å¿ƒé‡Œæƒ³ï¼Ÿ", options: [
          {text: "å¯¹é½æ›´é«˜æ•ˆ", score: 1},
          {text: "å…ˆè§‚æœ›ï¼Œå†å‘è¨€", score: 2},
          {text: "åˆä¸€ä¸ªæ¶ˆæ¯é»‘æ´", score: 3},
          {text: "è¿™ç¾¤æ˜¯ç”¨æ¥åŸ‹æˆ‘çš„", score: 4}
        ]},
        { question: "åŒäº‹ç”©æ¥ä¸€å¥â€˜è¿™ä¸ªä½ é¡ºä¾¿åšä¸‹â€™ï¼Œä½ ï¼Ÿ", options: [
          {text: "å¯ä»¥ï¼Œé¡ºä¾¿å°±é¡ºä¾¿", score: 1},
          {text: "å¯ä»¥ï¼Œä½†è¦æ’æœŸ", score: 2},
          {text: "å˜´ä¸Šç­”åº”ï¼Œå¿ƒé‡Œè®°ä»‡", score: 3},
          {text: "é¡ºä¾¿ï¼Ÿæˆ‘é¡ºä¾¿è¾èŒ", score: 4}
        ]},
        { question: "å½“ä½ è¯´â€˜OKâ€™ï¼Œä½ çœŸæ­£çš„æ„æ€æ›´åƒï¼Ÿ", options: [
          {text: "OK=æˆ‘è®¤åŒ", score: 1},
          {text: "OK=æˆ‘çŸ¥é“äº†", score: 2},
          {text: "OK=æˆ‘ä¸æƒ³äº‰äº†", score: 3},
          {text: "OK=æˆ‘å·²æ”¾å¼ƒæ²Ÿé€š", score: 4}
        ]},
        { question: "çœ‹è§çº¢è‰²çš„æœªè¯»æ¶ˆæ¯99+ï¼Œä½ ï¼Ÿ", options: [
          {text: "ç«‹åˆ»æ¸…ç©ºï¼Œæ•ˆç‡è‡³ä¸Š", score: 1},
          {text: "å…ˆæŒ‘é‡è¦çš„çœ‹", score: 2},
          {text: "å¼€å§‹æ‹–å»¶ï¼Œå‡è£…æ²¡çœ‹è§", score: 3},
          {text: "ç›´æ¥å´©æºƒï¼Œå…³é—­è½¯ä»¶", score: 4}
        ]},
        { question: "å‘¨ä¸€æ—©ä¸Šçš„ä½ æ›´åƒï¼Ÿ", options: [
          {text: "å¹²åŠ²åè¶³ï¼Œé‡æ–°å¼€å§‹", score: 1},
          {text: "æ­£å¸¸ä¸Šç­ï¼Œå¹³ç¨³æ¨è¿›", score: 2},
          {text: "é­‚è¿˜åœ¨å‘¨æœ«ï¼Œèº«ä½“ä¸Šç­", score: 3},
          {text: "å·²æ˜¯è¡Œå°¸èµ°è‚‰ï¼Œå»ºè®®ä¸‹æ¶", score: 4}
        ]}
      ];

      const extraQuestions = [
        { question: "æ”¶åˆ°ä¸€å°æŠ„é€ 12 äººçš„é‚®ä»¶ï¼Œä½ ç¬¬ä¸€ååº”ï¼Ÿ", options: [
          {text: "è®¤çœŸé€è¡Œçœ‹å®Œå¹¶å›å¤è¦ç‚¹", score: 1},
          {text: "å…ˆæ‰«ä¸€çœ¼ä¸»é¢˜å’Œç»“è®º", score: 2},
          {text: "å…ˆæ‰¾æœ‰æ²¡æœ‰@æˆ‘ï¼Œå†å†³å®šè£…ä¸è£…æ­»", score: 3},
          {text: "ç›´æ¥æŠŠè‡ªå·±ä¹ŸæŠ„é€ç»™çµå ‚", score: 4}
        ]},
        { question: "ç»©æ•ˆå­£è¢«é—®â€˜ä½ ä»Šå¹´æœ€å¤§çš„æˆé•¿ï¼Ÿâ€™ä½ æ›´åƒï¼Ÿ", options: [
          {text: "èƒ½å¤ç›˜ä¹Ÿèƒ½ä¸¾ä¾‹ï¼Œè¯šæ³è¾“å‡º", score: 1},
          {text: "å¥—æ¨¡æ¿å›ç­”ï¼Œå®‰å…¨ç¬¬ä¸€", score: 2},
          {text: "æœ€å¤§çš„æˆé•¿ï¼šå¿è€é˜ˆå€¼æå‡", score: 3},
          {text: "æˆé•¿ï¼Ÿæˆ‘åªæ˜¯åœ¨å˜ç¡¬", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å‘¨ä¼šâ€™çš„ç†è§£æ›´æ¥è¿‘ï¼Ÿ", options: [
          {text: "åŒæ­¥è¿›åº¦ï¼Œå‡å°‘ä¿¡æ¯å·®", score: 1},
          {text: "å¿…è¦æµç¨‹ï¼Œå°½é‡é«˜æ•ˆ", score: 2},
          {text: "å‘¨ä¼š=å‘¨å‘¨è¢«å®¡åˆ¤", score: 3},
          {text: "å‘¨ä¼š=æ—¶é—´çŒ®ç¥­ä»ªå¼", score: 4}
        ]},
        { question: "å·¥ä½é™„è¿‘æœ‰äººé«˜å£°å¼€å¤–æ”¾ä¼šè®®ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "ç¤¼è²Œæé†’å¯¹æ–¹æˆ´è€³æœº", score: 1},
          {text: "æˆ´ä¸Šè€³æœºé»˜é»˜å¿", score: 2},
          {text: "ç”¨é”®ç›˜æ•²å‡ºâ€˜éœ‡è€³æ¬²è‹â€™", score: 3},
          {text: "å½“åœºåŠ å…¥ä¼šè®®å¹¶å‘è¨€", score: 4}
        ]},
        { question: "çœ‹åˆ°ä¸€æ®µâ€˜æ„¿æ™¯â€™PPTï¼Œä½ çš„å†…å¿ƒå­—å¹•ï¼Ÿ", options: [
          {text: "æ–¹å‘æ¸…æ™°ï¼Œèƒ½è½åœ°å°±è¡Œ", score: 1},
          {text: "å…ˆå¬å¬å†è¯´", score: 2},
          {text: "æ„¿æ™¯å¾ˆç¾ï¼Œæˆ‘å…ˆç¡ä¼š", score: 3},
          {text: "è¿™é¥¼çš„çƒ­é‡å¤Ÿæˆ‘èƒ–ä¸‰å¹´", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å¼¹æ€§å·¥ä½œåˆ¶â€™çš„çœŸå®ä½“éªŒï¼Ÿ", options: [
          {text: "ç¡®å®æ›´è‡ªç”±æ›´èˆ’æœ", score: 1},
          {text: "å¶å°”çµæ´»ï¼ŒåŸºæœ¬æ­£å¸¸", score: 2},
          {text: "å¼¹æ€§=éšæ—¶åœ¨çº¿", score: 3},
          {text: "å¼¹æ€§=æ‹‰ä¼¸æˆæ©¡çš®ç­‹", score: 4}
        ]},
        { question: "è¢«æ‹‰å»åšâ€˜è·¨éƒ¨é—¨å¯¹é½â€™ï¼Œä½ æ›´åƒï¼Ÿ", options: [
          {text: "å…ˆå®šä¹‰ç›®æ ‡ä¸owner", score: 1},
          {text: "å…ˆè®°ç»“è®ºï¼Œåˆ«åµæ¶", score: 2},
          {text: "å…ˆè®°è¯æ®ï¼Œåˆ«èƒŒé”…", score: 3},
          {text: "å…ˆå†™æ‚¼è¯ï¼Œç»™è‡ªå·±", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜OKRâ€™çš„æ€åº¦æ›´æ¥è¿‘ï¼Ÿ", options: [
          {text: "æœ‰ç”¨ï¼Œèƒ½æ‹‰é½æ–¹å‘", score: 1},
          {text: "æœ‰ç”¨ï¼Œä½†åˆ«æ»¥ç”¨", score: 2},
          {text: "O æ˜¯è®¸æ„¿ï¼ŒKR æ˜¯å—è‹¦", score: 3},
          {text: "OKR=ç»™ç„¦è™‘å‘å·¥èµ„", score: 4}
        ]},
        { question: "ä½ æœ€å¸¸ç”¨çš„â€˜ä¸‡èƒ½å›å¤â€™æ˜¯ï¼Ÿ", options: [
          {text: "æˆ‘æ¥çœ‹çœ‹æ€ä¹ˆæ¨è¿›", score: 1},
          {text: "æˆ‘å…ˆåŒæ­¥ä¸€ä¸‹è¿›åº¦", score: 2},
          {text: "æˆ‘è¯„ä¼°ä¸€ä¸‹é£é™©", score: 3},
          {text: "æ”¶åˆ°ï¼ˆå¹¶å¼€å§‹çµé­‚å‡ºèµ°ï¼‰", score: 4}
        ]},
        { question: "æ”¶åˆ°ä¸€å¥â€˜ä½ æ–¹ä¾¿æ¥ä¸ªç”µè¯å—â€™ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "ç«‹åˆ»æ¥ï¼Œå¿«é€Ÿè§£å†³", score: 1},
          {text: "é—®æ¸…è®®é¢˜å†æ¥", score: 2},
          {text: "å…ˆå‘è¯­éŸ³ï¼šæˆ‘åœ¨å¿™", score: 3},
          {text: "ç”µè¯ï¼Ÿæˆ‘æ›´æƒ³æ‰“ 120", score: 4}
        ]},
        { question: "é¢å¯¹â€˜ä¸´æ—¶åŠ éœ€æ±‚â€™ï¼Œä½ æ›´åƒï¼Ÿ", options: [
          {text: "å…ˆç¡®è®¤ä»·å€¼å†åŠ ", score: 1},
          {text: "åŠ å¯ä»¥ï¼Œä½†è¦æ¢å–èˆ", score: 2},
          {text: "å˜´ä¸Šè¯´è¡Œï¼Œå¿ƒé‡Œå»ºåŸ", score: 3},
          {text: "æˆ‘ä¸´æ—¶ï¼Œéœ€æ±‚ä¹Ÿä¸´æ—¶", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜ä¼ä¸šæ–‡åŒ–å¢™â€™çš„æ„Ÿå—ï¼Ÿ", options: [
          {text: "æœ‰ä»ªå¼æ„Ÿï¼Œä¹ŸæŒºå¥½", score: 1},
          {text: "çœ‹çœ‹å°±è¡Œï¼Œä¸å½“çœŸ", score: 2},
          {text: "å¢™ä¸Šå†™çš„ï¼Œå¢™å¤–ä¸è®¤", score: 3},
          {text: "é‚£æ˜¯â€˜ç°å®ç¦æ­¢é€šè¡Œâ€™æç¤ºç‰Œ", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜åŠ ç­é¤â€™çš„æ€åº¦ï¼Ÿ", options: [
          {text: "åƒäº†å°±å¹²ï¼Œåˆ«æµªè´¹", score: 1},
          {text: "åƒå½’åƒï¼Œåˆ«å¸¸æ€", score: 2},
          {text: "åŠ ç­é¤=ç²¾ç¥èµ”å¿é‡‘", score: 3},
          {text: "æˆ‘å®æ„¿åƒç©ºæ°”ä¹Ÿè¦ä¸‹ç­", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å¹´ä¼šæŠ½å¥–â€™çš„çœŸå®å¿ƒæ€ï¼Ÿ", options: [
          {text: "å¼€å¿ƒå‚ä¸ï¼Œå›¾ä¸ªä¹", score: 1},
          {text: "éšç¼˜ï¼Œåˆ«å¤ªæœŸå¾…", score: 2},
          {text: "æŠ½åˆ°å•¥éƒ½åƒè¡¥å¿", score: 3},
          {text: "æŠ½å¥–=å†æŠ½ä¸€æ¬¡äººç”Ÿ", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å·¥ä½ç»¿æ¤â€™çš„ç†è§£æ›´åƒï¼Ÿ", options: [
          {text: "ç¾åŒ–ç¯å¢ƒï¼Œèˆ’ç¼“æƒ…ç»ª", score: 1},
          {text: "è£…é¥°è€Œå·²ï¼Œéšä¾¿", score: 2},
          {text: "å®ƒæ´»ç€ï¼Œæˆ‘å°±è¿˜æœ‰å¸Œæœ›", score: 3},
          {text: "å®ƒæ¯äº†ï¼Œæˆ‘ä¹Ÿå°±å·®ä¸å¤šäº†", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜é¢†å¯¼çªç„¶å…³å¿ƒä½ â€™çš„è§£è¯»ï¼Ÿ", options: [
          {text: "å¯èƒ½æ˜¯çœŸçš„å…³å¿ƒ", score: 1},
          {text: "å¯èƒ½æœ‰äº‹è¦æ¨è¿›", score: 2},
          {text: "è¦ä¹ˆåŠ æ´»ï¼Œè¦ä¹ˆèƒŒé”…", score: 3},
          {text: "è¿™æ˜¯äº‹æ•…é¢„è­¦ç³»ç»Ÿå¯åŠ¨äº†", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å…¬å¸ç¾¤é‡Œå‘çº¢åŒ…â€™çš„ååº”ï¼Ÿ", options: [
          {text: "å¼€å¿ƒæŠ¢ä¸€ä¸‹ï¼Œæ°”æ°›å¥½", score: 1},
          {text: "çœ‹å¿ƒæƒ…ï¼Œé¡ºæ‰‹æŠ¢", score: 2},
          {text: "æŠ¢åˆ° 0.01 ä¹Ÿç®—è¢«è®¤å¯", score: 3},
          {text: "æŠ¢çº¢åŒ…ä¸å¦‚æŠ¢å›ä¸‹ç­æƒ", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜åŠå…¬è½¯ä»¶å·²è¯»æç¤ºâ€™çš„æ€åº¦ï¼Ÿ", options: [
          {text: "æ–¹ä¾¿åä½œï¼ŒæŒºå¥½", score: 1},
          {text: "åˆ«å‚¬å°±è¡Œ", score: 2},
          {text: "å·²è¯»æç¤º=ç²¾ç¥ç›‘æ§å™¨", score: 3},
          {text: "æˆ‘å·²è¯»ï¼Œä½ å·²ç–¯ï¼Œæˆ‘ä»¬éƒ½å·²å®Œ", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å‡ºå·®â€™çš„çœŸå®æ„Ÿå—ï¼Ÿ", options: [
          {text: "æ¢ç¯å¢ƒæŒºæ–°é²œ", score: 1},
          {text: "å¯ä»¥ï¼Œä½†åˆ«å¤ªé¢‘ç¹", score: 2},
          {text: "å‡ºå·®=æŠŠç–²æƒ«æ‰“åŒ…é‚®å¯„", score: 3},
          {text: "å‡ºå·®=æ¬å®¶å¼å—åˆ‘", score: 4}
        ]},
        { question: "çœ‹åˆ°â€˜éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥â€™ï¼Œä½ ä¼šï¼Ÿ", options: [
          {text: "ç†è§£ï¼Œæ„¿æ„æ‰¿æ‹…", score: 1},
          {text: "ç†è§£ï¼Œä½†è¦æœ‰æˆæƒ", score: 2},
          {text: "ä¸»äººç¿=å…è´¹åŠ³åŠ¨åŠ›", score: 3},
          {text: "æˆ‘æ„¿å½“ä¸»äººï¼šæŠŠé—¨åé”ä¸‹ç­", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å·¥ä½çƒ­é—¹â€™æ›´æ¥è¿‘ï¼Ÿ", options: [
          {text: "çƒ­é—¹ç‚¹æ°›å›´å¥½", score: 1},
          {text: "å¶å°”å¯ä»¥ï¼Œåˆ«å¤ªåµ", score: 2},
          {text: "çƒ­é—¹=æ‰“æ–­æˆ‘æ‘¸é±¼èŠ‚å¥", score: 3},
          {text: "çƒ­é—¹=çµé­‚è¢«å¼ºè¡Œå¼€éº¦", score: 4}
        ]},
        { question: "å½“ä½ å¬åˆ°â€˜æˆ‘ä»¬è¦å·å‡ºä»·å€¼â€™ï¼Œä½ ï¼Ÿ", options: [
          {text: "å·å¯ä»¥ï¼Œä½†è¦æœ‰å›æŠ¥", score: 1},
          {text: "çœ‹çœ‹å›¢é˜Ÿæ°›å›´å†è¯´", score: 2},
          {text: "ä»·å€¼åœ¨å“ªï¼Ÿæˆ‘å…ˆæ‰¾æ‰¾", score: 3},
          {text: "å·å‡ºä»·å€¼=å·åˆ°å½’é›¶", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜åŠå…¬æ¡Œæ”¶çº³â€™çš„çŠ¶æ€æ›´åƒï¼Ÿ", options: [
          {text: "æ•´æ´æœ‰åºï¼Œæ•ˆç‡é«˜", score: 1},
          {text: "èƒ½æ‰¾åˆ°ä¸œè¥¿å°±è¡Œ", score: 2},
          {text: "æ‚ä¹±ä½†æˆ‘æ‡‚ï¼Œåƒæˆ‘", score: 3},
          {text: "æ¡Œé¢åƒæˆ˜åœºï¼Œå¿ƒä¹Ÿåƒ", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜æ—¥æŠ¥â€™çš„çœŸå®ç†è§£ï¼Ÿ", options: [
          {text: "å¤ç›˜æ¨è¿›ï¼Œå‡å°‘é—æ¼", score: 1},
          {text: "å¿…è¦äº¤ä»˜ï¼Œåˆ«å¤ªæŠ˜è…¾", score: 2},
          {text: "æ—¥æŠ¥=è¯æ˜æˆ‘è¿˜æ´»ç€", score: 3},
          {text: "æ—¥æŠ¥=æ¯å¤©å†™ä¸€æ¬¡æ±‚ç”Ÿä¿¡", score: 4}
        ]},
        { question: "ä½ å¯¹â€˜å›¢å»ºç ´å†°â€™çš„æ€åº¦ï¼Ÿ", options: [
          {text: "èƒ½æ´»è·ƒæ°”æ°›å°±æŒºå¥½", score: 1},
          {text: "é…åˆä¸€ä¸‹å°±è¡Œ", score: 2},
          {text: "ç ´å†°=æŠŠæˆ‘æœ€åä¸€ç‚¹è¾¹ç•Œç ¸ç¢", score: 3},
          {text: "ç ´å†°ï¼Ÿæˆ‘éœ€è¦çš„æ˜¯ç ´äº§å¼è¾èŒ", score: 4}
        ]}
      ];

      function shuffle(arr){
        const a = Array.isArray(arr) ? arr.slice() : [];
        for (let i = a.length - 1; i > 0; i -= 1){
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      const questions = shuffle([...baseQuestions, ...extraQuestions]);

      const el = (id) => document.getElementById(id);

      const views = {
        welcome: el("viewWelcome"),
        quiz: el("viewQuiz"),
        loading: el("viewLoading"),
        result: el("viewResult")
      };

      const scoreBounds = (() => {
        let min = 0;
        let max = 0;
        for (const q of questions){
          const scores = (q && Array.isArray(q.options)) ? q.options.map((o) => Number(o.score)).filter((n) => Number.isFinite(n)) : [];
          if (scores.length === 0) continue;
          min += Math.min(...scores);
          max += Math.max(...scores);
        }
        if (!Number.isFinite(min) || !Number.isFinite(max) || max <= min) return { min: 25, max: 100 };
        return { min, max };
      })();

      const state = {
        step: "welcome",
        qIndex: 0,
        totalScore: 0,
        locked: false
      };

      const timers = {
        toast: null,
        loadingInterval: null,
        loadingTimeout: null,
        transition1: null,
        transition2: null
      };

      let chartInstance = null;
      let lastShotObjectUrl = null;

      function cleanup(){
        if (timers.toast) clearTimeout(timers.toast);
        if (timers.loadingInterval) clearInterval(timers.loadingInterval);
        if (timers.loadingTimeout) clearTimeout(timers.loadingTimeout);
        if (timers.transition1) clearTimeout(timers.transition1);
        if (timers.transition2) clearTimeout(timers.transition2);
        timers.toast = null;
        timers.loadingInterval = null;
        timers.loadingTimeout = null;
        timers.transition1 = null;
        timers.transition2 = null;
        if (chartInstance) { try{ chartInstance.destroy(); }catch(e){} chartInstance = null; }
        if (lastShotObjectUrl) { try{ URL.revokeObjectURL(lastShotObjectUrl); }catch(e){} lastShotObjectUrl = null; }
      }

      function showToast(msg){
        const t = el("toast");
        if (!t) return;
        t.textContent = msg;
        t.classList.add("cx-show");
        if (timers.toast) clearTimeout(timers.toast);
        timers.toast = setTimeout(() => t.classList.remove("cx-show"), 1800);
      }

      function setProgress(percent){
        const p = Math.max(0, Math.min(100, percent));
        el("progressBar").style.width = `${p}%`;
        const wrap = el("progressBar").parentElement;
        if (wrap) wrap.setAttribute("aria-valuenow", String(Math.round(p)));
      }

      function setView(name){
        cleanupTransientOnly();
        Object.entries(views).forEach(([k, node]) => {
          const active = k === name;
          node.classList.toggle("cx-active", active);
          node.setAttribute("aria-hidden", active ? "false" : "true");
        });
        state.step = name;
      }

      function cleanupTransientOnly(){
        if (timers.loadingInterval) clearInterval(timers.loadingInterval);
        if (timers.loadingTimeout) clearTimeout(timers.loadingTimeout);
        if (timers.transition1) clearTimeout(timers.transition1);
        if (timers.transition2) clearTimeout(timers.transition2);
        timers.loadingInterval = null;
        timers.loadingTimeout = null;
        timers.transition1 = null;
        timers.transition2 = null;
      }

      function vib(ms){
        try{
          if (navigator.vibrate) navigator.vibrate(ms);
        }catch(e){}
      }

      function clamp(n, min, max){
        if (!Number.isFinite(n)) return min;
        return Math.max(min, Math.min(max, n));
      }

      function percentFromScore(score, bounds = scoreBounds){
        const denom = bounds.max - bounds.min;
        const p = Math.round(((score - bounds.min) / denom) * 100);
        return clamp(p, 0, 100);
      }

      function getLevel(score){
        if (score <= 40) return { title: "ğŸŒ± æ¸…æ¾ˆçš„æ´»è©è¨", hint: "ä½ è¿˜æ²¡è¢«ç­å‘³è…Œé€ï¼Œå»ºè®®è¶æ–°é²œè·‘è·¯ã€‚" };
        if (score <= 55) return { title: "ğŸ¤– æƒ…ç»ªç¨³å®š NPC", hint: "ä½ å¾ˆä¼šæ¼”ï¼Œæ¼”åˆ°è‡ªå·±éƒ½ä¿¡äº†ã€‚" };
        if (score <= 70) return { title: "â˜• å¾®ç‘•çš„æ— æƒ…æ‰“å­—æœº", hint: "ä½ ä¸æ˜¯åœ¨å·¥ä½œï¼Œä½ æ˜¯åœ¨æŒ‰é”®ç›˜ç»­å‘½ã€‚" };
        if (score <= 85) return { title: "ğŸº è…Œå…¥å‘³çš„è€å›é…¸èœ", hint: "ä½ çš„ä¸€å¥è¯é‡Œï¼Œå«ç›é‡æ¯”æµ·æ°´è¿˜é«˜ã€‚" };
        return { title: "ğŸ—¿ èµ›åšå…µé©¬ä¿‘ (å»ºè®®å¤ªåº™)", hint: "ä½ å·²å®ç°æƒ…ç»ªåŒ–çŸ³åŒ–ï¼Œå»ºè®®ä¸Šæ¶åšç‰©é¦†ã€‚" };
      }

      function getPrescription(score){
        if (score <= 40) return {
          title: "ä¿é²œè®¡åˆ’",
          items: [
            "æ¯å¤©è‡³å°‘ä¸€æ¬¡ï¼šåœ¨ç¾¤é‡Œâ€˜å·²è¯»ä¸å›â€™ï¼Œè®­ç»ƒå¿ƒç†å…ç–«ã€‚",
            "é‡åˆ°â€˜åŠ æ€¥â€™å…ˆé—®æ¸…æ¥šï¼šåŠ æ€¥ç»™è°çœ‹ï¼Ÿåˆ«ç»™è‡ªå·±çœ‹ã€‚",
            "å‘¨æœ«æŠŠé—¹é’Ÿæ‰”è¿œä¸€ç‚¹ï¼šä½ ä¸æ¬ ä»»ä½•äººæ—©èµ·ã€‚",
            "ä¸‹æ¬¡æƒ³å†…è€—ï¼šæŠŠè‡ªå·±å½“æˆæ‰‹æœºç”µæ± ï¼Œåˆ«è¾¹å……è¾¹ç©ã€‚"
          ]
        };
        if (score <= 55) return {
          title: "NPC è§£é”è¡¥ä¸",
          items: [
            "å¼€ä¼šæ—¶æŠŠâ€˜æ”¶åˆ°â€™æ¢æˆâ€˜æˆ‘éœ€è¦è¾¹ç•Œâ€™ï¼šä½ ä¸æ˜¯ä¸‡èƒ½æ¥å£ã€‚",
            "æ¯æ—¥ä¸€æ¬¡ï¼šå¯¹ä¸åˆç†éœ€æ±‚è¯´â€˜æˆ‘è¯„ä¼°ä¸‹é£é™©â€™ï¼Œè®©å¯¹æ–¹å‡ºæ±—ã€‚",
            "æŠŠâ€˜å¯¹é½â€™å½“ä½œâ€˜å¯¹ä¸èµ·â€™ï¼šåˆ«æ›¿åˆ«äººç®¡ç†ç„¦è™‘ã€‚",
            "ç»™è‡ªå·±è®¾å®šä¸‹ç­ä»ªå¼ï¼šå…³ç¯=ä¸‹çº¿ï¼Œåˆ«å½“æ°¸åŠ¨æœºã€‚"
          ]
        };
        if (score <= 70) return {
          title: "æ‰“å­—æœºé™¤é”ˆ",
          items: [
            "å‘¨æŠ¥å°‘å†™é»‘è¯ï¼Œå¤šå†™æˆæœï¼šè®©åˆ«äººä¸å¥½æ„æ€ç”©é”…ã€‚",
            "æŠŠâ€˜é¡ºä¾¿â€™æ‹†æˆä¸¤ä»¶äº‹ï¼šé¡ºä¾¿=æ–°å¢éœ€æ±‚=æ–°å¢æ’æœŸã€‚",
            "å»ºç«‹â€˜æƒ…ç»ªå›æ”¶ç«™â€™ï¼šæŠŠå§”å±ˆå†™ä¸‹æ¥ï¼Œç„¶ååˆ é™¤ã€‚",
            "æ¯å¤©ç»™è‡ªå·± 15 åˆ†é’Ÿå‘ç–¯é¢åº¦ï¼šå‘å®Œç–¯å†ç»§ç»­åšäººã€‚"
          ]
        };
        if (score <= 85) return {
          title: "é…¸èœè„±ç›",
          items: [
            "å¬åˆ°â€˜ä¸éš¾â€™å…ˆå¾®ç¬‘ï¼šç„¶åæŠŠæ‹†è§£æ¸…å•ç”©å‡ºå»ã€‚",
            "æŠŠâ€˜æˆ‘æ¥â€™å‡çº§ä¸ºâ€˜æˆ‘å¯ä»¥ï¼Œä½†éœ€è¦èµ„æºâ€™ï¼šåˆ«ç”¨å‘½æ¢ KPIã€‚",
            "é‡åˆ°ç”©é”…ä¾ ï¼šå…ˆç•™è¯æ®ï¼Œå†æŠŠé”…ç«¯å›å»ã€‚",
            "æ¯å¤©ä¸€æ¬¡ï¼šå¯¹è‡ªå·±è¯´â€˜æˆ‘ä¸è´Ÿè´£æ‹¯æ•‘æ‰€æœ‰é¡¹ç›®â€™ã€‚"
          ]
        };
        return {
          title: "å…µé©¬ä¿‘å¤æ´»æœ¯",
          items: [
            "ä½ éœ€è¦çš„ä¸æ˜¯æ•ˆç‡å·¥å…·ï¼Œæ˜¯â€˜æ‹’ç»å·¥å…·â€™ï¼šä¼˜å…ˆçº§ä¸æ˜¯ä½ èƒŒã€‚",
            "æŠŠä»»ä½•â€˜ä»Šå¤©å‘ç‰ˆâ€™éƒ½å½“ä½œäº‹æ•…æ¼”ä¹ ï¼šæµç¨‹ä¸èµ°=é£é™©å½’ä»–ã€‚",
            "æ¯å¤©ä¸€æ¬¡ï¼šå¯¹ç€é•œå­ç»ƒä¹ â€˜æˆ‘ä¸æ¥è¿™ä¸ªé”…â€™ã€‚",
            "å»ºè®®ç«‹åˆ»å®‰æ’ä¸€æ¬¡é•¿å‡ï¼šç»™çµé­‚åšä¸€æ¬¡å†·å¯åŠ¨ã€‚"
          ]
        };
      }

      function getSurvivalGuide(score){
        if (score <= 40) return { yi: ["å‡†ç‚¹å¹²é¥­","å¬äººåŠåƒé¥±é¥­"], ji: ["ä¸Šèµ¶ç€åŠ æˆ","çŒ›åƒç©ºå¤´æ”¯ç¥¨"], aug: ["åç”»é¥¼é€è§†çœ¼é•œ"] };
        if (score <= 55) return { yi: ["å¸¦è–ªè¹²å‘","ç³Šå¼„å­¦ä¸‡èƒ½è¯­å½•"], ji: ["çˆ±æ½åŒ…è¢±","çå‡ºé£å¤´"], aug: ["æ— æ„Ÿæƒ…â€œæ”¶åˆ°â€å›å¤æœº"] };
        if (score <= 70) return { yi: ["å†°ç¾å¼æŒ‚æ°´","è¸©ç‚¹è·‘è·¯"], ji: ["ç²¾ç¥èµ„æœ¬å®¶åŒäº‹","ä¸‹ç­å@æ‰€æœ‰äºº"], aug: ["å·¥ä½œç¾¤ä¸“å±é™å™ªè€³æœº"] };
        if (score <= 85) return { yi: ["å·å·æ›´æ–°ç®€å†","ç†Ÿè¯»åŠ³åŠ¨æ³•"], ji: ["å‘¨æœ«å¼ºåˆ¶å›¢å»º","æ„Ÿæ©æ•™è‚²"], aug: ["ç‰¹æ°Ÿé¾™ä¸ç²˜é”…é˜²å¾¡é˜µ"] };
        return { yi: ["åŸåœ°èººå¹³","å»æœ‰é£çš„åœ°æ–¹"], ji: ["å¬è§â€œå¼€ä¼šâ€ä¿©å­—","ä¸€åˆ‡æ´»äººäº¤æµ"], aug: ["ä¸€é”®é‡å¯äººç”ŸæŒ‰é’®"] };
      }

      function renderSurvivalGuide(score){
        const g = getSurvivalGuide(score);
        const fill = (id, items, cls) => {
          const root = el(id);
          if (!root) return;
          root.innerHTML = "";
          items.forEach((t) => {
            const s = document.createElement("span");
            s.className = `cx-pill ${cls}`;
            s.textContent = t;
            root.appendChild(s);
          });
        };
        fill("guideYi", g.yi, "cx-pill-green");
        fill("guideJi", g.ji, "cx-pill-red");
        fill("guideAug", g.aug, "cx-pill-blue");
      }

      function rangesByScore(score){
        if (score <= 40) return [[55,85],[20,45],[10,35],[15,40],[10,30]];
        if (score <= 55) return [[60,90],[30,55],[25,50],[30,55],[25,50]];
        if (score <= 70) return [[65,95],[45,70],[45,70],[50,75],[55,80]];
        if (score <= 85) return [[70,98],[60,85],[65,90],[70,92],[75,95]];
        return [[75,100],[70,95],[80,100],[80,100],[90,100]];
      }

      function randInt(min, max){
        if (!Number.isFinite(min) || !Number.isFinite(max)) return 0;
        let a = Math.ceil(min);
        let b = Math.floor(max);
        if (b < a) [a, b] = [b, a];
        return Math.floor(Math.random() * (b - a + 1)) + a;
      }

      function genRadar(score){
        const ranges = rangesByScore(score);
        return ranges.map(([min,max]) => {
          const jitter = randInt(-6, 6);
          return clamp(randInt(min, max) + jitter, 0, 100);
        });
      }

      function renderQuestion(){
        const q = questions[state.qIndex];
        el("qText").textContent = q.question;
        el("qCounter").textContent = `${state.qIndex + 1} / ${questions.length}`;
        setProgress((state.qIndex / questions.length) * 100);

        const optRoot = el("options");
        optRoot.innerHTML = "";
        const tags = ["A","B","C","D"];
        q.options.forEach((opt, idx) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "cx-opt";
          btn.innerHTML = `<span class="cx-optTag">${tags[idx]}</span>${opt.text}`;
          btn.addEventListener("click", () => pickOption(btn, opt.score));
          optRoot.appendChild(btn);
        });
      }

      function pickOption(btn, score){
        if (state.locked) return;
        state.locked = true;
        vib(18);
        console.log("ã€ä½“æ£€ã€‘é€‰æ‹©é€‰é¡¹", { qIndex: state.qIndex, score });

        Array.from(el("options").children).forEach((n) => n.classList.add("cx-disabled"));
        btn.classList.add("cx-picked");
        state.totalScore += score;

        timers.transition1 = setTimeout(() => {
          const panel = views.quiz;
          panel.style.opacity = "0";
          panel.style.transform = "translateY(10px)";

          timers.transition2 = setTimeout(() => {
            state.qIndex += 1;
            if (state.qIndex >= questions.length){
              state.locked = false;
              console.log("ã€ä½“æ£€ã€‘ç­”é¢˜ç»“æŸ", { totalScore: state.totalScore });
              showLoading();
              return;
            }
            renderQuestion();
            panel.style.opacity = "1";
            panel.style.transform = "translateY(0)";
            state.locked = false;
          }, 220);
        }, 300);
      }

      function showLoading(){
        setView("loading");
        const lines = [
          "æ­£åœ¨è§£æ Excel è„‘ç”µæ³¢...",
          "æ­£åœ¨ç§°é‡çµé­‚çš„é‡é‡...",
          "æ­£åœ¨æ ¡éªŒ KPI çš„æ¯’æ€§...",
          "æ­£åœ¨å‹ç¼©ä½ çš„æƒ…ç»ªæ—¥å¿—...",
          "æ­£åœ¨ç”Ÿæˆç­å‘³æŒ‡çº¹æ‘˜è¦..."
        ];
        let i = 0;
        const node = el("loadingLine");
        node.textContent = lines[0];
        if (timers.loadingInterval) clearInterval(timers.loadingInterval);
        timers.loadingInterval = setInterval(() => {
          i = (i + 1) % lines.length;
          node.textContent = lines[i];
        }, 420);

        if (timers.loadingTimeout) clearTimeout(timers.loadingTimeout);
        timers.loadingTimeout = setTimeout(() => {
          if (timers.loadingInterval) clearInterval(timers.loadingInterval);
          timers.loadingInterval = null;
          renderResult();
          setView("result");
        }, 2500);
      }

      function renderResult(){
        const rawScore = state.totalScore;
        const avg = rawScore / questions.length;
        const standardScore = clamp(Math.round(25 + ((avg - 1) / 3) * 75), 25, 100);
        const percent = percentFromScore(standardScore, { min: 25, max: 100 });
        const level = getLevel(standardScore);
        const presc = getPrescription(standardScore);

        el("kpiPercent").textContent = `${percent}%`;
        el("kpiScore").textContent = `${rawScore}`;
        el("levelText").textContent = level.title;
        el("levelHint").textContent = level.hint;

        el("prescTitle").textContent = `å¤„æ–¹å• / ${presc.title}`;
        const list = el("prescList");
        list.innerHTML = "";
        presc.items.forEach((t) => {
          const li = document.createElement("li");
          li.textContent = t;
          list.appendChild(li);
        });

        renderSurvivalGuide(standardScore);

        console.log("ã€ä½“æ£€ã€‘ç”Ÿæˆç»“æœ", { rawScore, standardScore, percent, level: level.title });

        const data = genRadar(standardScore);
        try{
          if (!window.Chart) throw new Error("Chart.js not loaded");
          const ctx = el("radarCanvas");
          if (chartInstance) chartInstance.destroy();
          chartInstance = new Chart(ctx, {
            type: "radar",
            data: {
              labels: ["æ‘¸é±¼åŠŸåŠ›","ç”©é”…æŠ—æ€§","æƒ…ç»ªæ­»æ„Ÿ","ç”»é¥¼å…ç–«","å‘ç–¯æŒ‡æ•°"],
              datasets: [{
                label: "Cyber Index",
                data,
                borderColor: "#00FF41",
                backgroundColor: "rgba(0,255,65,0.12)",
                pointBackgroundColor: "#00FF41",
                pointBorderColor: "#00FF41",
                pointHoverBackgroundColor: "#00FF41",
                pointHoverBorderColor: "#00FF41",
                borderWidth: 2
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  labels: { color: "rgba(237,237,237,.85)", font: { family: "monospace" } }
                }
              },
              scales: {
                r: {
                  suggestedMin: 0,
                  suggestedMax: 100,
                  angleLines: { color: "rgba(255,255,255,.10)" },
                  grid: { color: "rgba(255,255,255,.10)" },
                  pointLabels: { color: "rgba(237,237,237,.85)", font: { family: "monospace", size: 12 } },
                  ticks: { color: "rgba(163,163,163,.85)", backdropColor: "rgba(0,0,0,0)" }
                }
              }
            }
          });
        }catch(e){
          console.log("ã€ä½“æ£€ã€‘é›·è¾¾å›¾æ¸²æŸ“å¤±è´¥", e);
          showToast("é›·è¾¾å›¾åŠ è½½å¤±è´¥ï¼šè¯·æ£€æŸ¥ç½‘ç»œ/CDN");
        }
      }

      function yieldUI(){
        return new Promise((resolve) => requestAnimationFrame(() => setTimeout(resolve, 0)));
      }

      function formatStamp(){
        const d = new Date();
        const pad = (n) => String(n).padStart(2, "0");
        return `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}_${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())}`;
      }

      function guessSaveHint(filename){
        const ua = navigator.userAgent || "";
        if (/Android/i.test(ua)) return `å·²è§¦å‘ä¸‹è½½ï¼š${filename}ã€‚å¸¸è§ä¿å­˜ä½ç½®ï¼šDownload/ æˆ– Downloads/ æ–‡ä»¶å¤¹ã€‚`;
        if (/iPhone|iPad|iPod/i.test(ua)) return `å·²ç”Ÿæˆç—…å†å›¾ï¼š${filename}ã€‚iOS æ— æ³•ç›´æ¥è¯»å–ä¿å­˜è·¯å¾„ï¼Œè¯·åœ¨ä¸‹æ–¹é¢„è§ˆå›¾é•¿æŒ‰ä¿å­˜ï¼Œæˆ–ç‚¹å‡»â€œæ–°çª—å£æ‰“å¼€â€åå†ä¿å­˜ã€‚`;
        return `å·²è§¦å‘ä¸‹è½½ï¼š${filename}ã€‚å¸¸è§ä¿å­˜ä½ç½®ï¼šæµè§ˆå™¨ä¸‹è½½ç›®å½•ï¼ˆDownloadsï¼‰ã€‚`;
      }

      function isMobileUA(){
        const ua = navigator.userAgent || "";
        return /Android|iPhone|iPad|iPod/i.test(ua);
      }

      async function canvasToBlob(canvas){
        return await new Promise((resolve, reject) => {
          try{
            canvas.toBlob((b) => {
              if (!b) reject(new Error("toBlob failed"));
              else resolve(b);
            }, "image/png", 1);
          }catch(e){
            reject(e);
          }
        });
      }

      async function makeShot(){
        const btn = el("btnShot");
        btn.disabled = true;
        showToast("æ­£åœ¨ç”Ÿæˆç—…å†å›¾...");
        console.log("ã€ä½“æ£€ã€‘å¼€å§‹ç”Ÿæˆç—…å†å›¾");

        try{
          if (!window.html2canvas) throw new Error("html2canvas not loaded");
          await yieldUI();
          const node = el("captureArea");
          const canvas = await html2canvas(node, {
            backgroundColor: "#121212",
            scale: Math.min(1.5, window.devicePixelRatio || 1.5),
            useCORS: true,
            logging: false
          });
          const blob = await canvasToBlob(canvas);
          const filename = `cyber_report_${formatStamp()}.png`;

          if (lastShotObjectUrl) { try{ URL.revokeObjectURL(lastShotObjectUrl); }catch(e){} }
          lastShotObjectUrl = URL.createObjectURL(blob);

          el("shotImg").src = lastShotObjectUrl;
          el("btnOpenNew").href = lastShotObjectUrl;
          el("saveHint").textContent = guessSaveHint(filename);

          const overlay = el("overlay");
          overlay.classList.add("cx-show");
          overlay.setAttribute("aria-hidden", "false");
          vib(30);
          console.log("ã€ä½“æ£€ã€‘ç—…å†å›¾ç”ŸæˆæˆåŠŸ");

          try{
            const a = document.createElement("a");
            a.href = lastShotObjectUrl;
            a.download = filename;
            a.rel = "noopener";
            a.style.display = "none";
            document.body.appendChild(a);
            a.click();
            a.remove();
          }catch(e){
            console.log("ã€ä½“æ£€ã€‘è§¦å‘ä¸‹è½½å¤±è´¥", e);
          }

          try{
            if (isMobileUA() && navigator.canShare && navigator.share){
              const f = new File([blob], filename, { type: "image/png" });
              if (navigator.canShare({ files: [f] })){
                const sharePromise = navigator.share({ files: [f], title: "èµ›åšç—…å†å›¾", text: "ä¿å­˜ä½ çš„èµ›åšç—…å†å›¾" });
                await Promise.race([
                  sharePromise,
                  new Promise((_, reject) => setTimeout(() => reject(new Error("share timeout")), 1200))
                ]);
                el("saveHint").textContent = "å·²æ‰“å¼€ç³»ç»Ÿä¿å­˜é¢æ¿ï¼šä¿å­˜ä½ç½®ç”±ç³»ç»Ÿå†³å®šï¼Œæµè§ˆå™¨æ— æ³•è¯»å–å…·ä½“è·¯å¾„ã€‚";
              }
            }
          }catch(e){
            console.log("ã€ä½“æ£€ã€‘ç³»ç»Ÿåˆ†äº«å¤±è´¥", e);
          }
        }catch(e){
          console.log("ã€ä½“æ£€ã€‘ç—…å†å›¾ç”Ÿæˆå¤±è´¥", e);
          showToast("ç”Ÿæˆå¤±è´¥ï¼šè¯·ç¨åé‡è¯•/æˆ–ç›´æ¥æˆªå›¾");
        }finally{
          btn.disabled = false;
        }
      }

      function restart(){
        console.log("ã€ä½“æ£€ã€‘é‡æ–°å¼€å§‹");
        cleanup();
        state.step = "welcome";
        state.qIndex = 0;
        state.totalScore = 0;
        state.locked = false;
        setProgress(0);
        setView("welcome");
      }

      function start(){
        console.log("ã€ä½“æ£€ã€‘å¼€å§‹");
        cleanup();
        state.qIndex = 0;
        state.totalScore = 0;
        state.locked = false;
        setProgress(0);
        setView("quiz");
        renderQuestion();
      }

      function closeOverlay(){
        const overlay = el("overlay");
        overlay.classList.remove("cx-show");
        overlay.setAttribute("aria-hidden", "true");
      }

      function init(){
        el("btnStart").addEventListener("click", start);
        el("btnShot").addEventListener("click", makeShot);
        el("btnRestart").addEventListener("click", restart);
        el("btnCloseOverlay").addEventListener("click", closeOverlay);
        el("overlay").addEventListener("click", (e) => { if (e.target === el("overlay")) closeOverlay(); });

        window.addEventListener("pagehide", cleanup);
        document.addEventListener("visibilitychange", () => {
          if (document.visibilityState === "hidden") cleanupTransientOnly();
        });

        console.log("ã€ä½“æ£€ã€‘åˆå§‹åŒ–å®Œæˆ", { questions: questions.length });

        if (questions.length !== 50){
          console.log("ã€ä½“æ£€ã€‘é¢˜åº“æ•°é‡å¼‚å¸¸", { questions: questions.length });
          showToast("é¢˜åº“æ•°é‡å¼‚å¸¸ï¼šè¯·åˆ·æ–°é‡è¯•");
        }
      }

      init();
    })();
  </script>
</body>
</html>
